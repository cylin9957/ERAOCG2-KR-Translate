@MACHINE_CUSTOM
#DIM DYNAMIC 캐릭터_ID
#DIM DYNAMIC カードコスト,10
#DIM DYNAMIC 절정BASE計算
#DIM DYNAMIC 절정BASE基礎
#DIM DYNAMIC 이벤트主
#DIM DYNAMIC 選択파츠


IF ITEM:천년바이크 == 0
	PRINTFORMW 아파트로 따라왔지만、딱히 사용하고 있지 않다……。
	PRINTFORML 
	RETURN 0
ENDIF


IF 설정_엔진 == 0
	설정_엔진 = 300007
ENDIF
IF 설정_섀시 == 0
	설정_섀시 = 300101
ENDIF
IF 설정_부스트 == 0
	설정_부스트 = 300201
ENDIF

SIF 구입파츠:7 == 0
	구입파츠:7 = 1
SIF 구입파츠:101 == 0
	구입파츠:101 = 1
SIF 구입파츠:201 == 0
	구입파츠:201 = 1


$MACHINE_LOOP
CUSTOMDRAWLINE —
PRINTFORML 「머신 개조」
CUSTOMDRAWLINE —

VARSET RESULTS
TRYCALLFORM CARDNAME_{설정_엔진}, "名前"
PRINTFORML ENGINE[ 1] - %RESULTS%

VARSET RESULTS
TRYCALLFORM CARDNAME_{설정_섀시}, "名前"
PRINTFORML CHASIS[ 2] - %RESULTS%

VARSET RESULTS
TRYCALLFORM CARDNAME_{설정_부스트}, "名前"
PRINTFORML BOOST [ 3] - %RESULTS%
RESETCOLOR

CUSTOMDRAWLINE —
PRINTL
PRINTL [100] - 돌아간다
BINPUT
選択파츠 = RESULT
;戻る
IF 選択파츠 != 100
	CALL CUSTOM_WHEELS(選択파츠)
	GOTO MACHINE_LOOP
ENDIF

@CUSTOM_WHEELS(選択파츠,ボルガー社)
#DIMS DYNAMIC 설정カテゴリ
#DIM DYNAMIC 選択파츠
#DIM DYNAMIC 변경파츠
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カード_ID
#DIM DYNAMIC 파츠_ID
#DIM DYNAMIC 選択肢
#DIM DYNAMIC ボルガー社

$MACHINE_LOOP
SELECTCASE 選択파츠
CASE 1
	파츠_ID = 설정_엔진
	설정カテゴリ = 엔진
CASE 2
	파츠_ID = 설정_섀시
	설정カテゴリ = 섀시
CASE 3
	파츠_ID = 설정_부스트
	설정カテゴリ = 부스트
ENDSELECT


CUSTOMDRAWLINE —
PRINTFORML 「현재 설정 파츠」
CUSTOMDRAWLINE —
PRINTL
CALL CARD_UI_RESET
TRYCALLFORM CARD_UI(파츠_ID,2)
PRINTL [3] - 변경한다
PRINTL
PRINTL [100] - 돌아간다

BINPUT
IF RESULT == 100
	PRINTL 
	RETURN 0

ELSEIF RESULT == 3
	$MACHINE_LOOP_2
	CUSTOMDRAWLINE —
	PRINTFORML 「파츠 변경」
	CUSTOMDRAWLINE —
	FOR カウンタ,0,2000

		カード_ID = カウンタ + 300000
		VARSET RESULTS
		TRYCALLFORM CARDNAME_{カード_ID}, "カテゴリ"
		SIF RESULTS != 설정カテゴリ
			CONTINUE
		VARSET RESULTS
		TRYCALLFORM CARDNAME_{カード_ID}, "名前"
		SIF RESULTS == ""
			CONTINUE
		IF 파츠_ID == カード_ID
			SETCOLOR C_YELLOW
		ELSEIF 구입파츠:カウンタ == 0 && ボルガー社 != 1
			SETCOLOR C_GRAY
		ENDIF
		PRINTBUTTON @"[{カウンタ,4}] - %RESULTS,30,LEFT%",カード_ID
;		PRINTFORM 　所持数：{구입파츠:カウンタ}
		IF ボルガー社
			IF 파츠_ID == カード_ID
				PRINTFORM (설정 중)
			ELSEIF 구입파츠:カウンタ >= 1
				PRINTFORM (설정 가능)
			ELSE
				PRINTFORM ( 30000엔)
			ENDIF
		ELSE
			IF 파츠_ID == カード_ID
				PRINTFORM (설정 중)
			ELSEIF 구입파츠:カウンタ >= 1
				PRINTFORM (설정 가능)
			ELSE
				PRINTFORM (미소지)
			ENDIF
		ENDIF
		PRINTL
		RESETCOLOR
	NEXT
	CUSTOMDRAWLINE —
	PRINTL 
	PRINTL [9999] - 돌아간다

	BINPUT
	選択肢 = RESULT - 300000
	변경파츠 = RESULT
	IF RESULT == 9999
		GOTO MACHINE_LOOP
	ELSE
		IF 구입파츠:選択肢 == 0
			IF ボルガー社
				PRINTFORML 「 이녀석을 사고 싶은 건가？」
				PRINTL [1] - 구입한다
				PRINTL [2] - 돌아간다
				BINPUT
				IF RESULT == 2
					GOTO MACHINE_LOOP_2
				ELSE
					IF MONEY < 30000
						PRINTL 「돈이 부족하다고？」
						GOTO MACHINE_LOOP_2
					ENDIF
					CALL MONEY_GET(-30000)
					구입파츠:選択肢 = 1
					PRINTFORMW 「고마워！　그대로 붙여줄까？」
				ENDIF
			ELSE
				PRINTFORMW 이 파츠는 소지하고 있지 않습니다。
				GOTO MACHINE_LOOP_2
			ENDIF
		ENDIF
		CALL CARD_UI_RESET
		TRYCALLFORM CARD_UI(변경파츠,2)

		PRINTL [1] - 설정한다
		PRINTL [2] - 돌아간다
		BINPUT
		IF RESULT == 1
			PRINTFORML 키이이잉！！　깡깡깡깡！！
			PRINTFORML 　　드르르르륵！　철컥철컥！！
			PRINTL
			PRINTFORMW 파츠의 변경이 완료되었습니다。
			SELECTCASE 選択파츠
			CASE 1
				설정_엔진 = 변경파츠
			CASE 2
				설정_섀시 = 변경파츠
			CASE 3
				설정_부스트 = 변경파츠
			ENDSELECT
			GOTO MACHINE_LOOP
		ELSE
			GOTO MACHINE_LOOP_2
		ENDIF
	ENDIF
ENDIF


@MACHINE_SALES
#DIM DYNAMIC 캐릭터_ID
#DIM DYNAMIC カードコスト,10
#DIM DYNAMIC 절정BASE計算
#DIM DYNAMIC 절정BASE基礎
#DIM DYNAMIC 이벤트主
#DIM DYNAMIC 選択파츠
#DIM DYNAMIC ボルガー社

IF 설정_엔진 == 0
	설정_엔진 = 300007
ENDIF
IF 설정_섀시 == 0
	설정_섀시 = 300101
ENDIF
IF 설정_부스트 == 0
	설정_부스트 = 300201
ENDIF
SIF 구입파츠:7 == 0
	구입파츠:7 = 1
SIF 구입파츠:101 == 0
	구입파츠:101 = 1
SIF 구입파츠:201 == 0
	구입파츠:201 = 1


IF ITEM:천년바이크 == 0
	PRINTFORML 「뭐야？　무슨 용무야？　지금은 바쁘니까 돌아가」
	PRINTFORMW 외견이 무서운 사람에게 쫒겨났다……。
	PRINTFORML 
	RETURN 0
ELSE
	PRINTFORML 「뭐야、무슨 용……호오、좋은 머신이구만？　파츠가 필요한가？」
	PRINTFORMW 
	PRINTFORML 
ENDIF	


$MACHINE_LOOP
CUSTOMDRAWLINE —
PRINTFORML 「볼가 & 컴퍼니 사」
CUSTOMDRAWLINE —


VARSET RESULTS
TRYCALLFORM CARDNAME_{설정_엔진}, "名前"
PRINTFORML ENGINE[ 1] - %RESULTS%

VARSET RESULTS
TRYCALLFORM CARDNAME_{설정_섀시}, "名前"
PRINTFORML CHASIS[ 2] - %RESULTS%

VARSET RESULTS
TRYCALLFORM CARDNAME_{설정_부스트}, "名前"
PRINTFORML BOOST [ 3] - %RESULTS%
RESETCOLOR

CUSTOMDRAWLINE —
PRINTL
PRINTL [100] - 돌아간다
BINPUT
選択파츠 = RESULT
;戻る
IF 選択파츠 != 100
	CALL CUSTOM_WHEELS(選択파츠,1)
	GOTO MACHINE_LOOP
ENDIF


