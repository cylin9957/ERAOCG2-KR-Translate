@SHOW_COLLECTION
#DIM 캐릭터_ID
#DIM 팬티_ID
#DIM 팬티_数
#DIM 改行플래그

CUSTOMDRAWLINE —
VARSET LOCAL
FOR LOCAL,0,CHARANUM
	FOR 팬티_ID,0,25
		LOCALS = %CALLNAME:LOCAL%{팬티_ID}/
		IF STRCOUNT(SAVESTR:10,LOCALS)
			SIF STRCOUNT(SAVESTR:10,LOCALS) > 1
				LOCAL:4 ++
			IF !팬티_数
				PRINTL
				PRINTFORML 【 %CALLNAME:LOCAL%】
			ENDIF
			LOCALS:1 = %PANTSNAME(팬티_ID)% {STRCOUNT(SAVESTR:10,LOCALS)}枚
			PRINTFORM %LOCALS:1,25,LEFT%
			팬티_数 ++
			改行플래그 ++
			SIF 팬티_数 % 4 == 0 && 팬티_数
				PRINTL
		ENDIF
	NEXT
	SIF 改行플래그
		PRINTL
	팬티_数 = 0
	改行플래그 = 0
NEXT
PRINT [0] - 뒤로 
SIF LOCAL:4
	PRINT [1] - 1장 남기고 모두 판다
INPUT
IF RESULT == 1 && LOCAL:4
	VARSET LOCAL
	VARSET LOCALS
	FOR LOCAL,1,CHARANUM
		FOR 팬티_ID,0,25
			LOCALS = %CALLNAME:LOCAL%{팬티_ID}/
			SIF STRCOUNT(SAVESTR:10,LOCALS) > 1
				팬티_数 += STRCOUNT(SAVESTR:10,LOCALS) - 1
		NEXT
	NEXT
	LOCALS:2 = /
	FOR LOCAL,1,CHARANUM
		FOR 팬티_ID,0,25
			LOCALS = / %CALLNAME:LOCAL%{팬티_ID}/
			IF STRCOUNT(SAVESTR:10,LOCALS)
				LOCALS:1 = %CALLNAME:LOCAL%{팬티_ID}/
				LOCALS:2 += LOCALS
			ENDIF
		NEXT
	NEXT
	SAVESTR:10 = %LOCALS:2%
	PRINTFORMW 전부해서 {팬티 수}장이 {100 * 팬티_数}$에 팔렸습니다
	MONEY += 100 * 팬티_数
ELSE
	RETURN 0
ENDIF
RESTART
