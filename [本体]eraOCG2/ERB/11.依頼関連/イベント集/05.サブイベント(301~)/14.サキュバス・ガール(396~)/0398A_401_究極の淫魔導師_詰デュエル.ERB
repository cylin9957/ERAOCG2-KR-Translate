
@IRAI_DUEL_INTRO_401
#DIM DYNAMIC カウンタ
;듀얼前に「詰め플래그」に1を설정し、最初の5ドローをスキップ
;ターン跨いで処理したいので、듀얼が始まったら詰め플래그をリセット
詰め플래그 = 0

;詰め플래그でスキップしてしまった初期化
CALL CARD_LOADUP

;必要に応じて、ターンプレイヤーを변경(ここで자신にすると、상대のターンになる)
;ターンプレイヤー = 자신

;1以上の値を入れると、1度だけドローがスキップされる
SETVAR @"자신_ドロースキップ", 1
SETVAR @"상대_ドロースキップ", 1

;フィールドの情報を설정
;자신마함はなし

;상대フィールド
;MZ---------------
;クイーンズベッド
SETVAR @"상대_MZ_所有:2", 2;상대のカード
SETVAR @"상대_MZ_表:2", 2;守備표시
SETVAR @"상대_필드:2",259855
;魔--------------
;검은 음마법진
SETVAR @"상대_魔_所有:2", 2;상대のカード
SETVAR @"상대_魔_表:2", 1;表
SETVAR @"상대_마함:2",259856
;붉은 음마법진
SETVAR @"상대_魔_所有:1", 2;상대のカード
SETVAR @"상대_魔_表:1", 1;表
SETVAR @"상대_마함:1",259857
;푸른 음마법진
SETVAR @"상대_魔_所有:3", 2;상대のカード
SETVAR @"상대_魔_表:3", 1;表
SETVAR @"상대_마함:3",259858
;노란 음마법진
SETVAR @"상대_魔_所有:0", 2;상대のカード
SETVAR @"상대_魔_表:0", 1;表
SETVAR @"상대_마함:0",259859

;자신の손패
SETVAR @"자신_손패:0", 1000;ブラマジ
SETVAR @"자신_손패:1", 79900;ベッドルーム
SETVAR @"자신_손패:2", 79901;ピンクカーテン
SETVAR @"자신_손패:3", 99625;フェロモン
SETVAR @"자신_손패:4", 99626;コフィン

;자신の덱
SETVAR @"자신_덱:0", 1004;アップル
SETVAR @"자신_덱:1", 1005;チョコ
SETVAR @"자신_덱:2", 1006;レモン
SETVAR @"자신_덱:3", 79903;펠라
SETVAR @"자신_덱:4", 79904;키스ハメ

;상대の덱
;なし

;자신の묘지
SETVAR @"자신_묘지:0", 79902;파이즈리
SETVAR @"자신_묘지:1", 79905;エクスパンド

;자신のEX덱
SETVAR @"자신_EX덱:0", 59850;ブラサキュ
SETVAR @"자신_EX덱:1", 59851;アップル
SETVAR @"자신_EX덱:2", 59852;チョコ
SETVAR @"자신_EX덱:3", 59853;レモン

@IRAI_DECK_401(듀얼리스트)
#DIMS DYNAMIC 듀얼리스트

SIF 듀얼리스트 == "자신"
	;더미덱
	RETURN 20401
SIF 듀얼리스트 == "상대"
	;더미덱
	RETURN 20401
RETURN 0

;더미덱
@DUELDECK_20401(듀얼리스트)
#DIMS DYNAMIC 듀얼리스트
;なし

;승리条件の설정、ここで詰めデュエルの승리条件を설치できる。
@IRAI_DUEL_CONDVIC_401
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 対面者

VARSET RESULT

듀얼리스트 = 자신
対面者 = 상대

;特になし

;メッセージの설정
@IRAI_DUEL_MESSAGE_401(存在確認)
#DIM DYNAMIC 存在確認
VARSET RESULT

IF 存在確認 == 1
	RETURN 1
ENDIF

; アドバイス云々は没

; ;アドバイス플래그が立っていないならメッセージなし
; SIF 詰め플래그 != 2
; 	RETURN

; SELECTCASE ターン数
; 	CASE 1
; 		CALL FULLRESET
; 		효과範囲필드 = 1
; 		효과条件名前 = サキュバス・オブ・ブラック・フェロモン
; 		CALL CARD_CHECK_ADV("자신")
; 		;フェロモンを呼んでしまっている
; 		IF RESULT == 1
; 			PRINTFORML フェロモンを呼んじゃったんですか……？
; 			PRINTFORML うーん……もしかしたらＬＰが足りなくなっちゃうかもしれませんよ？
; 			RETURN
; 		ENDIF
; 		CALL FULLRESET
; 		효과範囲마함 = 1
; 		효과条件名前 = マジカル・シルクベッドルーム－淫魔術の秘儀
; 		CALL CARD_CHECK_ADV("자신")
; 		;ベッドルーム未설치
; 		IF RESULT != 1
; 			CALL FULLRESET
; 			효과範囲필드 = 1
; 			효과条件名前 = レモン・서큐버스 걸
; 			CALL CARD_CHECK_ADV("자신")
; 			;フィールドにレモン・서큐버스 걸がいる
; 			IF RESULT == 1
; 				PRINTFORML あ、先にカーテンでレモンちゃんを呼んだ感じですか？
; 				PRINTFORML でしたら次こそ「ベッドルーム」설치ですね！
; 				PRINTFORML 발동時のサーチはマジシャンの子ならどっちでもよさそうですかね……？
; 				RETURN
; 			ELSE
; 				;フィールドにアップルか초코 서큐버스 걸がいる
; 				CALL FULLRESET
; 				효과範囲필드 = 1
; 				효과条件カテゴリ = 서큐버스 걸
; 				CALL CARD_CHECK_ADV("자신")
; 				IF RESULT == 1
; 					PRINTFORML あ、先にカーテンで他の子を呼んだ感じですか？
; 					PRINTFORML でしたら次こそ「ベッドルーム」설치ですね！
; 					PRINTFORML 발동時のサーチは契約後に後続のマジシャンを用意できるレモンちゃんにしましょうか。
; 					RETURN
; 				ENDIF
; 			ENDIF
; 			PRINTFORML まずは「ベッドルーム」を발동しちゃいましょう！
; 			PRINTFORML 발동時のサーチは契約後に後続のマジシャンを用意できるレモンちゃんにしましょうか。
; 			RETURN
; 		; ベッドルーム설치後
; 		ELSE
; 			CALL FULLRESET
; 			효과範囲필드 = 1
; 			효과条件カテゴリ = 서큐버스 걸
; 			CALL CARD_CHECK_ADV("자신")
; 			;フィールドに서큐버스 걸がない
; 			IF RESULT == 1
; 				CALL FULLRESET
; 				효과範囲손패 = 1
; 				효과条件カテゴリ = 매지션 걸
; 				효과条件CNT = 1
; 				CALL CARD_CHECK_ADV("자신")
; 				;ベッド설치時にちゃんとマジシャンガールをサーチしてる
; 				IF RESULT >= 2
; 					PRINTFORML よーし！ じゃあ「ベッドルーム」の효과で서큐버스 걸を呼びましょう！
; 					PRINTFORML ……さ、最初はそうですね、ここは？ やっぱり？ 私をドン★ と出すのが？ いいんじゃないでしょうか？
; 					RETURN
; 				;ベッド설치時に変なものをサーチした
; 				ELSE
; 					PRINTFORML ……マスター？ 「ベッドルーム」설치時に女の子以外を손패に加えちゃいました？
; 					PRINTFORML うむむ、サキュバス・マジックはこのターンは使いたくないので……ちょっと全員揃えられなさそうですね……
; 				ENDIF
; 			ENDIF
; 			;以降、
; 			CALL FULLRESET
; 			효과範囲필드 = 1
; 			효과条件名前 = 블랙 서큐버스 걸
; 			CALL CARD_CHECK_ADV("자신")
; 			;ブラサキュ소환済
; 			IF RESULT == 1
; 				CALL FULLRESET
; 				효과範囲필드 = 1
; 				효과条件カテゴリ = 서큐버스 걸
; 				효과条件CNT = 1
; 				CALL CARD_CHECK_ADV("자신")
; 				;ブラサキュしかサキュバスがいない
; 				IF RESULT == 1
; 					PRINTFORML あはっ♥ じゃあ次の子も呼んじゃいましょうか♥

; 					CALL FULLRESET
; 					효과範囲손패 = 1
; 					효과範囲필드 = 1
; 					효과条件名前 = レモン・매지션 걸
; 					CALL CARD_CHECK_ADV("자신")
; 					;손패にレモンがいる
; 					IF RESULT == 1
; 						PRINTFORML 「ベッドルーム」でレモンちゃんを呼ぶもよし、「カーテン」で他の子を呼ぶもよし……よりどりみどりですね♥
; 					;손패にレモン以外がいる (손패に誰もいない場合はブラサキュ呼ぶ段階ではじいている、はず？)
; 					ELSE
; 						PRINTFORML 「ベッドルーム」で손패の子を呼ぶもよし、「カーテン」でレモンちゃんを呼ぶもよし……よりどりみどりですね♥
; 					ENDIF
; 					RETURN
; 				;ブラサキュ以外にもいる
; 				ELSE
; 					CALL FULLRESET
; 					효과範囲필드 = 1
; 					효과条件名前 = レモン・서큐버스 걸
; 					CALL CARD_CHECK_ADV("자신")
; 					;レモンがいる
; 					IF RESULT == 1
; 						CALL FULLRESET
; 						효과範囲손패 = 1
; 						효과条件名前 = 淫魔術のピンクカーテン －淫魔術の子種継承－
; 						CALL CARD_CHECK_ADV("자신")
; 						;カーテン未使用
; 						IF RESULT == 1
; 							PRINTFORML じゃあ、レモンちゃんの효과を使う前に「カーテン」で他の子も呼んじゃいましょうか♥
; 							PRINTFORML ここで呼ばなかった子はレモンちゃんの효과で呼ぶのでどっちの子でもいいですよ♥
; 							RETURN
; 						;カーテン使用済
; 						ELSE
; 							CALL FULLRESET
; 							효과範囲필드 = 1
; 							효과条件カテゴリ = 서큐버스 걸
; 							효과条件CNT = 1
; 							CALL CARD_CHECK_ADV("자신")
; 							;レモンをカーテンで呼んでる (필드サキュバス2体)
; 							IF RESULT == 2
; 								CALL FULLRESET
; 								효과範囲덱 = 1
; 								효과条件カテゴリ = 매지션 걸
; 								효과条件CNT = 1
; 								CALL CARD_CHECK_ADV("자신")
; 								;덱にまだマジシャンが２体 = ベッドルームでマジシャンガールをサーチしていない？
; 								IF RESULT == 2
; 									PRINTFORML あれ……？ 손패に매지션 걸の子がいませんね……
; 									PRINTFORML 「ベッドルーム」の발동時に매지션 걸以外を손패に加えたりしました？
; 									RETURN
; 								;後続をベッドで呼ぶかレモンで出すか
; 								ELSE
; 									;たぶんレモンで呼んだ契約前の子がいる
; 									IF 발동済_1("자신",59853)
; 										PRINTFORML レモンちゃんの효과で呼んだ子と「ベッドルーム」で契約しましょう♥
; 										PRINTFORML あ、先に他の子と契約して焦らしてあげてもいいですよ♥
; 										RETURN
; 									ELSE
; 										PRINTFORML うんうん♥ じゃあレモンちゃんの효과で덱の子を呼ぶか、「ベッドルーム」でもういる子と契約するか……♥
; 										PRINTFORML あっ、レモンちゃんの효과で제외するのは使い終わった「カーテン」がいいと思いますよ♥
; 										RETURN
; 									ENDIF
; 								ENDIF
; 							;필드サキュバス3人
; 							ELSEIF RESULT == 3
; 								;レモン효과使用済
; 								IF 발동済_1("자신",59853)
; 									CALL FULLRESET
; 									효과範囲손패 = 1
; 									효과範囲필드 = 1
; 									효과条件カテゴリ = 매지션 걸
; 									효과条件固カテゴリ = 서큐버스 걸
; 									CALL CARD_CHECK_ADV("자신")
; 									;未契約の子がいる
; 									IF RESULT == 1
; 										PRINTFORML じゃあ残りの子と「ベッドルーム」で契約しましょう♥
; 										PRINTFORML これで全員揃いますね♥
; 										RETURN
; 									;なんか足りない
; 									ELSE
; 										PRINTFORML ……マスター、１人足りなくないですか？
; 										PRINTFORML サキュバス・マジックはこのターン使いたくないので……やり直した方がいいかもしれませんよ？
; 										RETURN
; 									ENDIF
; 								;レモン효과使用前
; 								ELSE
; 									PRINTFORML レモンちゃんの효과で덱の子を呼びましょう♥
; 									PRINTFORML 제외するのは使い終わった「カーテン」にしましょうね♥
; 									RETURN
; 								ENDIF
; 							ENDIF
; 						ENDIF
; 					;レモンがいない
; 					ELSE
; 						CALL FULLRESET
; 						효과範囲손패 = 1
; 						효과条件名前 = 淫魔術のピンクカーテン －淫魔術の子種継承－
; 						CALL CARD_CHECK_ADV("자신")
; 						;カーテン未使用
; 						IF RESULT == 1
; 							PRINTFORML じゃあレモンちゃんも「カーテン」で呼んじゃいましょうか♥
; 							RETURN
; 						;カーテン使用済
; 						ELSE
; 							CALL FULLRESET
; 							효과範囲손패 = 1
; 							효과範囲필드 = 1
; 							효과条件名前 = レモン・매지션 걸
; 							CALL CARD_CHECK_ADV("자신")
; 							;契約前レモンがいる
; 							IF RESULT == 1
; 								PRINTFORML さて、じゃあ「ベッドルーム」でレモンちゃんとも契約しちゃいましょう♥
; 								RETURN
; 							;契約前レモンがいない
; 							ELSE
; 								PRINTFORML ……マスター、１人足りなくないですか？
; 								PRINTFORML サキュバス・マジックはこのターン使いたくないので……やり直した方がいいかもしれませんよ？
; 								RETURN
; 							ENDIF
; 						ENDIF
; 					ENDIF
; 				ENDIF
; 			;ブラサキュ未소환、けどサキュバスがいる
; 			ELSE
; 				CALL FULLRESET
; 				효과範囲손패 = 1
; 				효과条件名前 = 淫魔術のピンクカーテン －淫魔術の子種継承－
; 				CALL CARD_CHECK_ADV("자신")
; 				;カーテン未使用
; 				IF RESULT == 1
; 				;カーテン使用済
; 				ELSE
; 					CALL FULLRESET
; 					효과範囲필드 = 1
; 					효과条件名前 = レモン・서큐버스 걸
; 					CALL CARD_CHECK_ADV("자신")
; 					;レモンがいる
; 					IF RESULT == 1
; 					ELSE
; 					;レモンがいない
; 						CALL FULLRESET
; 						효과範囲손패 = 1
; 						효과範囲필드 = 1
; 						효과条件名前 = レモン・서큐버스 걸
; 						CALL CARD_CHECK_ADV("자신")
; 						;契約前レモンはいる
; 						IF RESULT == 1
							
; 						;契約前レモンもいない(カーテンを他の子に使ってサーチもレモンじゃない)
; 						ELSE
; 							PRINTFORML ……マスター、１人足りなくないですか？
; 							PRINTFORML サキュバス・マジックはこのターン使いたくないので……やり直した方がいいかもしれませんよ？
; 							RETURN
; 						ENDIF
; 					ENDIF
; 				ENDIF
; 			ENDIF
; 		ENDIF
; 	CASE 2
; 	CASE 3
; 	CASEELSE
		
; ENDSELECT