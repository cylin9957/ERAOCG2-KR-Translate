@CARDNAME_40080,参照先
;ココで指定卡片の名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = 惑乱魔库拉莉亚
	CASE "略称"
		RESULTS = 库拉莉亚(惑)
	CASE "カテゴリ"
		RESULTS:0 = 惑乱魔
		RESULTS:1 = E.R.A
ENDSELECT


@CARD_40080(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "種類"
		RETURN リンク
	CASE "属性"
		RETURN 地属性
	CASE "種族"
		RETURN 植物族
	CASE "レベル"
		RETURN 2
	CASE "攻撃力"
		RETURN 900
	CASE "守備力"
		RETURN 1900
	CASE "性別"
		RETURN 牝性
ENDSELECT

RETURN 0

@CARDSUMMON_40080(決闘者,召喚カード,EX参照)
#DIMS DYNAMIC 決闘者
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 召喚カード
#DIM DYNAMIC EX参照
;素材条件

CALL RESETCONDITION_MAT
	必要リンク数 = 2
	素材条件カテゴリ:0 = 蟲惑魔
	素材条件カテゴリ:1 = 惑乱魔
	素材条件カテゴリ:2 = 蜜罐

IF EX参照 == 1
	CALL LINCAN(決闘者,召喚カード,40080) 
	RETURN RESULT
ENDIF

@CARD_EXPLANATION_40080(種類)
#DIM DYNAMIC 種類

CALL TEXT_DECORATION("ROGUE")
PRINTL 「蟲惑魔」モンスターまたは「惑乱魔」モンスタx2
PRINTL このカード名の②③の効果はそれぞれ１ターンに１度しか使用できない。
CALLFORM CARD_ABLE(0,永続効果)
PRINTL ①：このカードは罠耐性を持つ,相手フィールド攻撃力为0的怪兽或「蜜罐」効果を発動できない。
CALLFORM CARD_ABLE(1,特殊召喚時,EX召喚時)
PRINTL ②：このカードが特殊召喚·EX召喚時に成功した場合に発動できる。
PRINTL 自分从墓地把1只「惑乱魔」モンスタ特殊召唤,相手从墓地把1只持有性別のモンスタ视为「蜜罐」攻撃表示特殊召唤。
CALLFORM CARD_ABLE(2,戦場起動,フリー誘発)
PRINTL ③：相手戦闘阶段,以自分フィールドこのカード以外的1只「惑乱魔」モンスタ和相手フィールド1只モンスタ为对象才能发动。
PRINTL その自分のモンスタの表示形式を変更,その相手のモンスターはこのターン、もう１度攻撃できる。
CALLFORM CARD_ABLE(3,攻撃時誘発)
PRINTL ④：このカードが攻撃対象に選択された場合に発動する。,自分·相手フィールド1张「蜜罐」から墓地へ送って発動できる。
PRINTL 攻撃対象を他の「惑乱魔」モンスターに移し替え。
CALL TEXT_DECORATION("ROGUE")

@CARDCAN_40080(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC 対面者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 必要的卡

CALL 対面者判定(決闘者)
対面者 = %RESULTS%

CALL CARD_NEGATE(決闘者,種類,ゾーン,場所,40080)
SIF RESULT == 1
	RETURN 0

IF 種類 == 特殊召喚時 || 種類 == EX召喚時
	SIF 発動済_1(決闘者,40080)
		RETURN 0
    SIF ゾーン != "戦場"
		RETURN 0
	
	CALL FULLRESET
	効果範囲墓地 = 1
	効果条件種類 = モン全般
	効果条件カテゴリ = 惑乱魔
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
    SIF RESULT != 1
		RETURN 0

    CALL FULLRESET
    効果範囲相手墓地 = 1
    効果条件種類 = モン全般
	効果条件性別 = 性別在
    CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
    SIF RESULT != 1
		RETURN 0
    RETURN 1

ELSEIF 種類 == 戦場起動 || 種類 == フリー誘発
	SIF 発動済_2(決闘者,40080)
		RETURN 0
	SIF ターンプレイヤー == 決闘者
		RETURN 0
	SIF	バトルフェイズ != 1
		RETURN 0
	SIF ゾーン != "戦場"
		RETURN 0

	CALL FULLRESET
	効果範囲戦場 = 1
	効果条件表示 = 表側表示
	効果条件カテゴリ = 惑乱魔
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
    SIF RESULT != 1
		RETURN 0
	
	CALL FULLRESET
    効果範囲相手戦場 = 1
    効果条件表示 = 表側表示
	効果条件以攻撃力 = 1
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
    RETURN 1

ELSEIF 種類 == 攻撃時誘発
    SIF ゾーン != "戦場"
		RETURN 0
	SIF 戦闘場所(決闘者) != 場所
		RETURN 0
	SIF ターンプレイヤー == 決闘者
		RETURN 0

    CALL FULLRESET
    効果範囲戦場 = 1
    効果条件カテゴリ = 惑乱魔
	効果条件固名前 = 惑乱魔库拉莉亚
    CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0

	CALL FULLRESET
	効果範囲魔罠 = 1
	効果範囲相手魔罠 = 1
	効果条件カテゴリ = 蜜罐
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1

ELSEIF 種類 == 永続効果
	SIF ゾーン != "戦場"
		RETURN 0
	RETURN 1 
ENDIF


@CARDEFFECT_40080(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIM DYNAMIC 選択カード
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 选择自己卡片
#DIM DYNAMIC 选择对方卡片

CALL 対面者判定(決闘者)
対面者 = %RESULTS%

IF 種類 == 特殊召喚時 || 種類 == EX召喚時
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,40080,1)
    IF RESULT == 0
		CALL FULLRESET
		効果範囲墓地 = 1
		効果条件種類 = モン全般
		効果条件カテゴリ = 惑乱魔
		CALL CARD_SP_SUMMON_ADV(決闘者,ゾーン,場所)

		CALL FULLRESET
		効果範囲墓地 = 1
    	効果条件種類 = モン全般
		効果条件性別 = 性別在
		効果追加カテ = 蜜罐
		CALL CARD_SP_SUMMON_ADV(対面者,ゾーン,場所,"攻撃表示")
	ENDIF

ELSEIF 種類 == 戦場起動 || 種類 == フリー誘発
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,40080,2)
    IF RESULT == 0
    	CALL FULLRESET
    	効果範囲戦場 = 1
    	効果条件表示 = 表側表示
    	効果条件カテゴリ = 惑乱魔
    	効果条件固名前 =  惑乱魔库拉莉亚
    	CALL CARD_CHOOSE_BASIC(決闘者,"戦場",ゾーン,場所)
    	选择自己卡片 = RESULT
    	IF 选择自己卡片 != 9999
        	IF GETVAR(@"%決闘者%_MZ_表:RESULT") == 1
				CALL SET_FIELD_INFO(決闘者,"戦場",选择自己卡片,"表",2,1)
			ELSEIF GETVAR(@"%決闘者%_MZ_表:RESULT") == 2
				CALL SET_FIELD_INFO(決闘者,"戦場",选择自己卡片,"表",1,1)
			ENDIF

			CALL FULLRESET
			効果範囲相手戦場 = 1
			効果条件表示 = 表側表示
			CALL CARD_CHOOSE_BASIC(決闘者,"相手戦場",ゾーン,場所)
			选择对方卡片 = RESULT
			IF 选择对方卡片 != 9999
				CALL SET_FIELD_INFO(対面者,"戦場",选择对方卡片,"戦",1)
			ENDIF
        ENDIF
    ENDIF

ELSEIF 種類 == 攻撃時誘発
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,40080,3)
    IF RESULT == 0
    	CALL FULLRESET
		効果範囲戦場 = 1
		効果範囲魔罠 = 1
		効果範囲相手戦場 = 1
		効果範囲相手魔罠 = 1
		効果条件カテゴリ = 蜜罐
		効果条件行先フラグ = 墓地行き
		CALL CARD_ADD_GY_ADV(決闘者,ゾーン,場所)
		IF RESULT == 1
			CALL FULLRESET
			効果範囲戦場 = 1
			効果条件カテゴリ = 惑乱魔
			効果条件固名前 = 惑乱魔库拉莉亚
			CALL CARD_CHOOSE_BASIC(決闘者,"戦場",ゾーン,場所)
			選択カード = RESULT
			IF 選択カード != 9999
				CALL COVER_ATTACK(決闘者,選択カード)
			ENDIF
		ENDIF
	ENDIF
ELSEIF 種類 == 永続効果
	CALL FULLRESET
	CALL STATCHANGE_EFFECT(決闘者,"自身",場所,"罠耐")
	CALL FULLRESET
	効果範囲相手戦場 = 1
	効果条件攻撃力 = 1
	CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"無効")
	CALL FULLRESET
	効果範囲相手戦場 = 1
	効果条件カテゴリ = 蜜罐
	CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"無効")
ENDIF

