@CARDNAME_40078,参照先
;ココで指定卡片の名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = 惑乱魔阿蒂普丝
	CASE "略称"
		RESULTS = 阿蒂普丝(惑)
	CASE "カテゴリ"
		RESULTS:0 = 惑乱魔
		RESULTS:1 = E.R.A
ENDSELECT


@CARD_40078(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "種類"
		RETURN リンク
	CASE "属性"
		RETURN 地属性
	CASE "種族"
		RETURN 昆虫族
	CASE "レベル"
		RETURN 3
	CASE "攻撃力"
		RETURN 900
	CASE "守備力"
		RETURN 1900
	CASE "性別"
		RETURN 牝性
ENDSELECT

RETURN 0

@CARDSUMMON_40078(決闘者,召喚カード,EX参照)
#DIMS DYNAMIC 決闘者
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 召喚カード
#DIM DYNAMIC EX参照
;素材条件

CALL RESETCONDITION_MAT
	必要リンク数 = 3
	素材条件カテゴリ:0 = 蟲惑魔
	素材条件カテゴリ:1 = 惑乱魔


IF EX参照 == 1
	CALL LINCAN(決闘者,召喚カード,40078) 
	RETURN RESULT
ENDIF

@CARD_EXPLANATION_40078(種類)
#DIM DYNAMIC 種類

CALL TEXT_DECORATION("ROGUE")
PRINTL 「蟲惑魔」モンスターまたは「惑乱魔」モンスタ2体以上
PRINTL このカード名の③④の効果はそれぞれ１ターンに１度しか使用できない。
CALLFORM CARD_ABLE(0,永続効果)
PRINTL ①：このカードは罠耐性を持つ。
PRINTL 自分·相手フィールド攻撃力为0的モンスタ或「蜜罐」は戦闘では破壊されない。
CALLFORM CARD_ABLE(0,攻守変動)
PRINTL ②: 相手フィールド攻撃力为0的モンスタ或「蜜罐」が守備表示の場合,那些卡的守備力变为0。
CALLFORM CARD_ABLE(1,戦場起動)
PRINTL ③：相手フィールドの表側表示モンスター１体を対象として発動できる。
PRINTL 自分の墓地から通常罠カード１枚を除外し,そのモンスタの攻撃力变为0,効果をターン終了時まで無効にする,この効果は相手ターンでも発動できる。
PRINTL 那之后可以从自分の墓地から通常罠カード１枚を除外し,选相手フィールド1只攻撃力为0的怪兽除外。
PRINTL そのカードが「性別を有するモンスター」した場合,作为除外的代替把那只怪兽当作「蜜罐」给这张卡装备。
CALLFORM CARD_ABLE(1,バトル開始時)
PRINTL ④：自分バトルフェイズ開始時に発動できる。
PRINTL 自分·相手フィールド攻撃力为0的持有性別的怪兽视为「蜜罐」并变为守備表示,没有性別的モンスタ送去墓地。
PRINTL 自己フィールドの「惑乱魔」怪兽直到ターン終了時攻撃力上升自分·相手フィールド「蜜罐」的数量*500,貫通攻撃を得る。
CALL TEXT_DECORATION("ROGUE")

@CARDCAN_40078(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 条件達成

CALL 対面者判定(決闘者)
対面者 = %RESULTS%

CALL CARD_NEGATE(決闘者,種類,ゾーン,場所,40078)
SIF RESULT == 1
	RETURN 0

IF 種類 == 戦場起動
	SIF 発動済_1(決闘者,40078)
		RETURN 0
	SIF ゾーン != "戦場"
		RETURN 0

	CALL FULLRESET
    効果範囲相手戦場 = 1
    効果条件表示 = 表側表示
    CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0

	CALL FULLRESET
	効果範囲墓地 = 1
	効果条件種類 = 通常罠
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1

ELSEIF 種類 == バトル開始時
	SIF 発動済_2(決闘者,40078)
		RETURN 0
	SIF ゾーン != "戦場"
		RETURN 0
 	SIF ターンプレイヤー != 決闘者
		RETURN 0

	CALL FULLRESET
	効果範囲相手戦場 = 1
	効果条件攻撃力 = 1
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT == 1
    	条件達成 ++

 	CALL FULLRESET
	効果範囲戦場 = 1
	効果条件攻撃力 = 1
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
    SIF RESULT == 1
    	条件達成 ++

	CALL FULLRESET
	効果範囲相手戦場 = 1
	効果範囲相手魔罠 = 1
	効果条件カテゴリ = 蜜罐
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT == 1
    	条件達成 ++

	CALL FULLRESET
	効果範囲戦場 = 1
	効果範囲魔罠 = 1
	効果条件カテゴリ = 蜜罐
	CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
	SIF RESULT == 1
    	条件達成 ++
	SIF 条件達成 == 0
		RETURN 0
	RETURN 1

ELSEIF 種類 == 永続効果 || 種類 == 攻守変動 || 種類 == リアクション効果
	SIF ゾーン != "戦場"
		RETURN 0
	RETURN 1
ENDIF

@CARDEFFECT_40078(決闘者,種類,ゾーン,場所)
#DIMS DYNAMIC 決闘者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 種類
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 蜜罐数量
#DIM DYNAMIC 选择除外陷阱
#DIM DYNAMIC 选择除外怪兽
#DIM DYNAMIC 選択カード
#DIM DYNAMIC 追击卡片
#DIM DYNAMIC 調教対象
#DIM DYNAMIC 攻撃力修正

CALL 対面者判定(決闘者)
対面者 = %RESULTS%

IF 種類 == 戦場起動
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,40078,1)
    IF RESULT == 0
    	効果条件種類 = 通常罠
    	CALL CARD_CHOOSE_BASIC(決闘者,"墓地",ゾーン,場所)
    	选择除外陷阱 = RESULT
    	IF 选择除外陷阱 != 9999 && GETVAR(@"%決闘者%_除外NG置換") == 0
			CALL CARD_DISPOSE(決闘者,"墓地",选择除外陷阱)
			CALL FULLRESET
			効果条件表示 = 表側表示
			CALL CARD_CHOOSE_BASIC(決闘者,"相手戦場",ゾーン,場所)
			選択カード = RESULT
			IF 選択カード != 9999
        		CALL FULLRESET
				CALL CARD_REMOVAL_BASIC(決闘者,"自動処理",選択カード,"無効")
				CALL CARD_REMOVAL_BASIC(決闘者,"自動処理",選択カード,"永攻DOWN",100000)

				CALL CARD_LOADUP

				CALL FULLRESET
				PRINTL 要除外墓地的「惑乱魔」怪兽以发动额外的效果吗？
				PRINTL [1] - 是
				PRINTL [100] - 但是我拒绝
				BINPUT
				IF RESULT != 100
					CALL FULLRESET
					効果条件種類 = モン全般
					効果条件カテゴリ = 惑乱魔
					CALL CARD_CHOOSE_BASIC(決闘者,"墓地",ゾーン,場所)
					选择除外怪兽 = RESULT
					IF 选择除外怪兽 != 9999
						CALL CARD_DISPOSE(決闘者,"墓地",选择除外怪兽)
						CALL FULLRESET
						効果範囲相手戦場 = 1
						効果条件攻撃力 = 1
						CALL CARD_CHOOSE_BASIC(決闘者,"相手戦場",ゾーン,場所)
						追击卡片 = RESULT
						IF 追击卡片 != 9999
							TRYCALLFORM CARD_{GETVAR(@"%対面者%_戦場:追击卡片")}, "性別"
							IF RESULT == 牝性 || RESULT == ふたなり || RESULT == 雄性
								TRYCALLFORM CARDNAME_{GETVAR(@"%対面者%_戦場:追击卡片")}("名前")
								調教対象 = GETVAR(@"%対面者%_戦場:追击卡片")
								CALL FULLRESET
								効果追加カテ = 蜜罐
								CALL CARD_EQUIP_MONSTER(決闘者,場所,"相手戦場",追击卡片)

								CALL CARD_EROTICS(調教対象)
								IF RESULT != -1
									調教対象 = RESULT
									SETCOLOR C_PINK
									PRINTFORML
									PRINTFORMW 无力反抗的%CALLNAME:調教対象%成为了阿蒂普斯中意的玩物，被轻易的拖走了……！
									PRINTFORML
									RESETCOLOR
									CALL EROTIC_MOVE("苗床捕縛",調教対象, -1, 100)
								ENDIF

							ELSE
								CALL FULLRESET
								CALL CARD_REMOVAL_BASIC(決闘者,"自動処理",追击卡片,"除外")
							ENDIF
						ENDIF
					ENDIF
				ENDIF
			ENDIF
		ENDIF
	ENDIF

ELSEIF 種類 == バトル開始時
	CALL CARD_CHOICE(決闘者,種類,ゾーン,場所,40078,2)
    IF RESULT == 0
		FOR カウンタ,0,5
			SIF GETVAR(@"%決闘者%_戦場:カウンタ") == -1
				CONTINUE
			SIF GETVAR(@"%決闘者%_MZ_表:カウンタ") == 3
				CONTINUE
			IF GETVAR(@"%決闘者%_MZ_性:カウンタ") == 牝性 || GETVAR(@"%決闘者%_MZ_性:カウンタ") == ふたなり || GETVAR(@"%決闘者%_MZ_性:カウンタ") == 雄性 && GETVAR(@"%決闘者%_MZ_攻:カウンタ") <= 0
				CALL CARD_SET_CATEGORY(決闘者,"戦場",カウンタ,"蜜罐")
			ELSEIF GETVAR(@"%決闘者%_MZ_性:カウンタ") != 牝性 || GETVAR(@"%決闘者%_MZ_性:カウンタ") != ふたなり || GETVAR(@"%決闘者%_MZ_性:カウンタ") != 雄性 && GETVAR(@"%決闘者%_MZ_攻:カウンタ") <= 0
				CALL CARD_DISPOSE(決闘者,"戦場",カウンタ)
			ENDIF
			CALL FULLRESET
			効果条件カテゴリ = 蜜罐
			CALL STATCHANGE_EFFECT(決闘者,"戦場",カウンタ,"表",2)
		NEXT

		FOR カウンタ,0,5
			SIF GETVAR(@"%対面者%_戦場:カウンタ") == -1
				CONTINUE
			SIF GETVAR(@"%対面者%_MZ_表:カウンタ") == 3
				CONTINUE
			IF GETVAR(@"%対面者%_MZ_性:カウンタ") == 牝性 || GETVAR(@"%対面者%_MZ_性:カウンタ") == ふたなり || GETVAR(@"%対面者%_MZ_性:カウンタ") == 雄性 && GETVAR(@"%対面者%_MZ_攻:カウンタ") <= 0
				CALL CARD_SET_CATEGORY(対面者,"戦場",カウンタ,"蜜罐")
			ELSEIF GETVAR(@"%対面者%_MZ_性:カウンタ") != 牝性 || GETVAR(@"%対面者%_MZ_性:カウンタ") != ふたなり || GETVAR(@"%対面者%_MZ_性:カウンタ") != 雄性 && GETVAR(@"%対面者%_MZ_攻:カウンタ") <= 0
				CALL CARD_DISPOSE(対面者,"戦場",カウンタ)
			ENDIF
			CALL FULLRESET
			効果条件カテゴリ = 蜜罐
			CALL STATCHANGE_EFFECT(決闘者,"相手戦場",カウンタ,"表",2)
		NEXT

		CALL CARD_LOADUP

		CALL FULLRESET
		効果範囲戦場 = 1
		効果範囲魔罠 = 1
		効果範囲相手戦場 = 1
		効果範囲相手魔罠 = 1
		効果条件カテゴリ = 蜜罐
		CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
		IF RESULT == 1
			CALL FULLRESET
			効果範囲戦場 = 1
			効果範囲魔罠 = 1
			効果範囲相手戦場 = 1
			効果範囲相手魔罠 = 1
			効果条件カテゴリ = 蜜罐
			効果条件CNT = 1
			CALL CARD_CHECK_ADV(決闘者,種類,ゾーン,場所)
			蜜罐数量 = RESULT
			攻撃力修正 = RESULT * 500
			効果条件カテゴリ = 惑乱魔
			CALL STATCHANGE_EFFECT(決闘者,"戦場",場所,"一攻",攻撃力修正)
			CALL STATCHANGE_EFFECT(決闘者,"戦場",場所,"貫通",1)
		ENDIF
	ENDIF

ELSEIF 種類 == 攻守変動
	CALL FULLRESET
	効果範囲相手戦場 = 1
	効果条件攻撃力 = 1
	効果条件表示 = 15
	CALL STATCHANGE_BASIC(決闘者,"相手戦場",場所,0,-100000,40078)

	CALL FULLRESET
	効果範囲相手戦場 = 1
	効果条件カテゴリ = 蜜罐
	効果条件表示 = 15
	CALL STATCHANGE_BASIC(決闘者,"相手戦場",場所,0,-100000,40078)

ELSEIF 種類 == 永続効果
	CALL FULLRESET
	CALL STATCHANGE_EFFECT(決闘者,"自身",場所,"罠耐")
	CALL FULLRESET
	効果範囲相手戦場 = 1
	効果条件攻撃力 = 1
	CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"戦耐")

	CALL FULLRESET
	効果範囲戦場 = 1
	効果条件攻撃力 = 1
	CALL STATCHANGE_EFFECT(決闘者,"戦場",場所,"戦耐")

	CALL FULLRESET
	効果範囲相手戦場 = 1
	効果条件カテゴリ = 蜜罐
	CALL STATCHANGE_EFFECT(決闘者,"相手戦場",場所,"戦耐")

	CALL FULLRESET
	効果範囲戦場 = 1
	効果条件カテゴリ = 蜜罐
	CALL STATCHANGE_EFFECT(決闘者,"戦場",場所,"戦耐")

ELSEIF 種類 == リアクション効果
	FOR カウンタ,0,5
		SIF GETVAR(@"%決闘者%_魔罠:カウンタ") == -1
			CONTINUE
		SIF GETVAR(@"%決闘者%_魔_装:カウンタ") != 場所
			CONTINUE
		SIF GETVAR(@"%決闘者%_魔_リ数:カウンタ") >= 10
			CONTINUE
			
		CALL CARD_EROTICS(GETVAR(@"%決闘者%_魔罠:カウンタ"))
		IF RESULT != -1
			調教対象 = RESULT
			SETCOLOR C_PINK
			PRINTFORML
			PRINTFORML %CALLNAME:調教対象%的体内被阿蒂普斯种入了满满当当的卵,随后被作为产床，以双腿大开的羞耻姿势挂在了空中。
			PRINTFORMW 阿蒂普斯用蛛丝将植入了卵的腔内与屁穴细心的封装好，腹部传来的异动感促使%CALLNAME:調教対象%拼命将这些卵排出体外，却无济于事。
			PRINTFORML
			RESETCOLOR
			CALL EROTIC_MOVE("疑似出産",調教対象,-1,100)
			CALL SET_FIELD_INFO(決闘者,"魔罠",カウンタ,"リ数",1,0,1)
		ENDIF
	NEXT

	FOR カウンタ,0,5
		SIF GETVAR(@"%対面者%_戦場:カウンタ") == -1
			CONTINUE
		SIF GETVAR(@"%対面者%_MZ_リ数:カウンタ") >= 10
			CONTINUE
		SIF GETVAR(@"%対面者%_MZ_攻:カウンタ") >= 1
			CONTINUE

		CALL CARD_EROTICS(GETVAR(@"%対面者%_戦場:カウンタ"))
		IF RESULT != -1
			調教対象 = RESULT
			SETCOLOR C_PINK
			PRINTFORML
			PRINTFORMW %CALLNAME:調教対象%的力量不足以挣脱蛛丝,如同收藏品般挂在蛛网上等待着主人的把玩……！
			PRINTFORML
			RESETCOLOR
			CALL EROTIC_MOVE("拘束晒し",調教対象)
			CALL SET_FIELD_INFO(決闘者,"戦場",カウンタ,"リ数",1,0,1)
		ENDIF
	NEXT
ENDIF