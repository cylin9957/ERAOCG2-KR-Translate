@CARDNAME_39687,参照先
;ココで지정卡片の名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = レ도레미아이돌 드리미아
	CASE "略称"
		RESULTS = ♫ 드리미아
	CASE "カテゴリ"
		RESULTS:0 = 도레미코드
		RESULTS:1 = 도레미아이돌
		RESULTS:2 = E.R.A
ENDSELECT


@CARD_39687(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "종류"
		RETURN 효과モン
	CASE "속성"
		RETURN 바람속성
	CASE "종족"
		RETURN 천사족
	CASE "レベル"
		RETURN 2
	CASE "攻撃力"
		RETURN 600
	CASE "守備力"
		RETURN 400
	CASE "성별"
		RETURN 牝性
	CASE "分割"
		RETURN 펜듈럼
	CASE "連動ID"
		RETURN 2087
ENDSELECT
RETURN 0

@CARD_EXPLANATION_39687(종류)
#DIM DYNAMIC 종류

CALL TEXT_DECORATION("P_MAGIC")
PRINTL 이 카드명의 ①のP효과는 1턴에 1번밖에 사용할 수 없다。
CALLFORM CARD_ABLE(3,마함起動)
PRINTL ①：자신의 메인 페이즈에 발동할 수 있다。
PRINTL    이 카드를 앞면 표시로 EX덱に加え、その後패 / EX덱에서 レベルが奇数の「도레미코드」Pモンスター1体を특수 소환한다。
CALL TEXT_DECORATION("P_MAGIC_2")
PRINTL 이 카드명은 룰상 も「도레미코드」カード로서 취급한다。
PRINTL 이 카드명의 ①②のモンスター효과는 각각 1턴에 1번밖에 사용할 수 없다。
CALLFORM CARD_ABLE(1,소환時,특수소환時)
PRINTL ①：이 카드가 소환 / 특수 소환에 성공한 경우에 발동할 수 있다。
PRINTL    덱에서 レベルが奇数の「도레미코드」Pモンスター1体を특수 소환한다。
PRINTL    그 몬스터의 レベルが5以上の경우、이 턴 자신은 천사족 몬스터 밖에 특수 소환할 수 없다。
CALLFORM CARD_ABLE(2,필드起動)
PRINTL ②：자신의 마법 / 함정 존에 レベルが偶数の「도레미코드」P몬스터가 존재하지 않는 경우에 발동할 수 있다。
PRINTL    이 카드를 자신의 마법＆함정 존에 앞면 표시로 置き、덱에서 レベルが奇数の「도레미코드」Pモンスター1体を앞면 표시로 EX덱に加える。
CALLFORM CARD_ABLE(4,攻撃時誘発)
PRINTL  ●「도레미아이돌 交響舞台」による付与효과：
PRINTL    자신의 마법 / 함정 존에 「レ도레미아이돌 드리미아」が存在せず、이 카드가 전투를 행한 경우에 발동할 수 있다。
PRINTL    이 카드를 자신의 마법 / 함정 존에 앞면 표시로 置き、その戦闘を무효로 하고、그 몬스터를 「드리미아오시」にする。
PRINTL    그 몬스터が既に「드리미아오시」で있는 경우、그 몬스터의 컨트롤을 얻는다。
PRINTL
SETCOLOR C_D_GRAY
PRINTL    自身の필드에 「レ도레미아이돌 드리미아」と「드리미아오시」が同時に存在する場合………………
RESETCOLOR

@CARDSUMMON_AA_39687


@CARDCAN_39687(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所

CALL CARD_NEGATE(듀얼리스트,종류,ゾーン,場所,39687)
SIF RESULT == 1
	RETURN 0

IF 종류 == 손패起動
	SIF メインフェイズ != 1
		RETURN 0
	SIF ターンプレイヤー != 듀얼리스트
		RETURN 0
	SIF 마함数(듀얼리스트) >= 5
		RETURN 0
	CALL FULLRESET
	효과範囲마함 = 1
	효과条件名前 = レ도레미아이돌 드리미아
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT == 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 소환時 || 종류 == 특수소환時
	SIF 발동済_1(듀얼리스트,39687)
		RETURN 0
	SIF 손패数(듀얼리스트) == 0
		RETURN 0
	SIF モンスター数(듀얼리스트) >= 5
		RETURN 0
	CALL FULLRESET
	효과範囲덱 = 1
	효과条件カテゴリ = 도레미코드
	효과条件종류 = モン全般
	효과条件レベル:0 = 1
	효과条件レベル:1 = 3
	효과条件レベル:2 = 5
	효과条件レベル:3 = 7
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 필드起動
	SIF 발동済_2(듀얼리스트,39687)
		RETURN 0
	SIF メインフェイズ != 1
		RETURN 0
	SIF ターンプレイヤー != 듀얼리스트
		RETURN 0
	SIF 마함数(듀얼리스트) >= 5
		RETURN 0
	CALL FULLRESET
	효과範囲덱 = 1
	효과条件カテゴリ = 도레미코드
	효과条件종류 = モン全般
	효과条件レベル:0 = 1
	효과条件レベル:1 = 3
	효과条件レベル:2 = 5
	효과条件レベル:3 = 7
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	CALL FULLRESET
	효과範囲마함 = 1
	효과条件カテゴリ = 도레미코드
	효과条件종류 = モン全般
	효과条件レベル:0 = 2
	효과条件レベル:1 = 4
	효과条件レベル:2 = 6
	효과条件レベル:3 = 8
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT == 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 마함起動
	SIF 발동済_3(듀얼리스트,39687)
		RETURN 0
	SIF ゾーン != "마함"
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_魔_表:場所") >= 2
		RETURN 0
	SIF メインフェイズ != 1
		RETURN 0
	SIF ターンプレイヤー != 듀얼리스트
		RETURN 0
	SIF モンスター数(듀얼리스트) >= 5
		RETURN 0
	CALL FULLRESET
	효과範囲손패 = 1
	효과範囲EX덱 = 1
	효과条件カテゴリ = 도레미코드
	효과条件종류 = EX以外全般
	효과条件レベル:0 = 1
	효과条件レベル:1 = 3
	효과条件レベル:2 = 5
	효과条件レベル:3 = 7
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 攻撃時誘発
	SIF ゾーン != "필드"
		RETURN 0
	SIF GETVARS(@"%듀얼리스트%_フィールド名") != "도레미아이돌 交響舞台"
		RETURN 0
	SIF 戦闘場所(듀얼리스트) != 場所
		RETURN 0
	SIF 戦闘場所(듀얼리스트,1) == 5
		RETURN 0
	SIF 마함数(듀얼리스트) >= 5
		RETURN 0
	CALL FULLRESET
	효과範囲마함 = 1
	효과条件名前 = レ도레미아이돌 드리미아
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT == 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == ターン終了時強制
	SIF ゾーン != "필드"
		RETURN 0
	CALL FULLRESET
	효과範囲필드 = 1
	효과条件カテゴリ = 드리미아오시
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ENDIF
;---------------------------------------------------------------------------------------------
;---------------------------------------------------------------------------------------------
;---------------------------------------------------------------------------------------------
@CARDEFFECT_39687(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 対面者 
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC 选择卡片
#DIM DYNAMIC 调教对象
#DIM DYNAMIC 実行役대상


CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

IF 종류 == 손패起動
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,39687)
	IF RESULT == 0
		CALL FULLRESET
		CALL CARD_DISPOSE(듀얼리스트,ゾーン,場所,마함行き)
	ENDIF
ELSEIF 종류 == 소환時 || 종류 == 특수소환時
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,39687,1)
	IF RESULT == 0
		CALL FULLRESET
		효과範囲덱 = 1
		효과条件カテゴリ = 도레미코드
		효과条件종류 = モン全般
		효과条件レベル:0 = 1
		효과条件レベル:1 = 3
		효과条件レベル:2 = 5
		효과条件レベル:3 = 7
		CALL CARD_SP_SUMMON_ADV(듀얼리스트,ゾーン,場所)
		IF RESULT != 9999
			TRYCALLFORM CARD_{RESULT:1},"レベル"
			IF RESULT > 4
				SS소환可能종족:0 = 천사족
				CALL CARD_SS_RESTRICTION(듀얼리스트)
			ENDIF
		ENDIF
	ENDIF
ELSEIF 종류 == 필드起動
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,39687,2)
	IF RESULT == 0
		CALL FULLRESET
		CALL CARD_DISPOSE(듀얼리스트,ゾーン,場所,마함行き)

		CALL FULLRESET
		효과範囲덱 = 1
		효과条件カテゴリ = 도레미코드
		효과条件종류 = モン全般
		효과条件レベル:0 = 1
		효과条件レベル:1 = 3
		효과条件レベル:2 = 5
		효과条件レベル:3 = 7
		효과条件行先플래그 = EX덱行き
		CALL CARD_ADD_GY_BASIC(듀얼리스트,"덱",ゾーン,場所)
	ENDIF
ELSEIF 종류 == 마함起動
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,39687,3)
	IF RESULT == 0
		CALL FULLRESET
		CALL CARD_DISPOSE(듀얼리스트,ゾーン,場所,EX덱行き)
		CALL FULLRESET
		효과範囲손패 = 1
		효과範囲EX덱 = 1
		효과条件カテゴリ = 도레미코드
		효과条件종류 = EX以外全般
		효과条件レベル:0 = 1
		효과条件レベル:1 = 3
		효과条件レベル:2 = 5
		효과条件レベル:3 = 7
		CALL CARD_SP_SUMMON_ADV(듀얼리스트,ゾーン,場所)
		

		调教对象 = NO_TO_CHARANUM(2087)
		CALL CARD_SS_RESTRICTION(듀얼리스트)
		CALL CARD_EROTICS(상대プレイヤー,対面者)
		実行役대상 = RESULT
		SIF 调教对象 != -1 && 実行役대상 != -1
			CALL DoSol_business(実行役대상,调教对象,0)
	ENDIF
ELSEIF 종류 == 攻撃時誘発
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,39687,4)
	IF RESULT == 0
		CALL FULLRESET
		选择卡片 = 戦闘場所(듀얼리스트,1)
		CALL CARD_DISPOSE(듀얼리스트,ゾーン,場所,마함行き)
		调教对象 = NO_TO_CHARANUM(2087)

			SETCOLOR C_G_YELLOW
		IF GETVARS(@"%対面者%_MZ_追カテ:选择卡片")  == "드리미아오시"
			TRYCALLFORM CARDNAME_{GETVAR(@"%対面者%_필드:选择卡片")}, "名前"
			PRINTFORML 
			PRINTFORML 「%RESULTS%さん、わたしたちの親衛隊に入ってくれませんか♪」
			PRINTFORML  %CALLNAME:调教对象%の매력にすっかり魅了された%RESULTS%は、思わず強くうなずいてしまった！
			PRINTFORMW
			CALL FULLRESET
			CALL CARD_REMOVAL_BASIC(듀얼리스트,"自動処理",选择卡片,"強奪",12086)
		ELSE
			CALL CARD_SET_CATEGORY(対面者,"필드",选择卡片,"드리미아오시")
			TRYCALLFORM CARDNAME_{GETVAR(@"%対面者%_필드:选择卡片")}, "名前"
			PRINTFORML 
			PRINTFORML  %CALLNAME:调教对象%は蝶のように軽やかに後場へと舞いながら攻撃をかわす、敵対行為さえもショーの一部に昇華させる
			PRINTFORML  %RESULTS%は%CALLNAME:调教对象%のアイドル姿に魅了された、「드리미아오시」になってしまった！！
			PRINTFORMW
			CALL EVADE_ATTACK(듀얼리스트)
		ENDIF
			RESETCOLOR
	ENDIF
ELSEIF 종류 == ターン終了時強制
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,39687,4)
	IF RESULT == 0
		CALL FULLRESET
		효과範囲필드 = 1
		효과条件カテゴリ = 드리미아오시
		효과条件CNT = 1
		CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
		选择卡片 = RESULT	;亲卫队数目
		调教对象 = NO_TO_CHARANUM(2087)

		CALL DoSol_FansAttack(듀얼리스트,場所,调教对象,选择卡片)
		CALL STATCHANGE_EFFECT(듀얼리스트,"自身",場所,"発情",2)
		CALL STATCHANGE_EFFECT(듀얼리스트,"自身",場所,"接可",2)
	ENDIF
ENDIF
RETURN